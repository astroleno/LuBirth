绝对同意你的取舍：

月相 = 由日期唯一确定 → 低频变更，可“锁定”。

地球 = 随经纬/当地时刻实时变化 → 高频刷新，主渲染负载应给地球。

在这个前提下，双通道可以做成“锁月球、跑地球”的优化结构。给你一份不写代码的优化清单（从“最省算力”到“画质优先”排列）。

A. “锁月＋单通道复用”的混合优化（强烈推荐）

思路：双通道只在“日期变更”时触发一次，把月球的相位结果烘到贴图里；之后常规帧只渲地球，月球用Unlit/自发光材质显示这张贴图，彻底不吃地球光照。

触发点：日期变化 → 计算月相参数 → 开“月球通道”渲一次到 RenderTarget（高分辨率、和屏幕色彩/色调一致）。

常规帧：禁用月球通道；地球正常实时渲染；月球以 MeshBasic（或 PBR 但 emissive=1） 显示烘焙贴图。

优点：99% 帧都是一次渲染；月球完全不受地球光照；版本/维护风险最低。

细节：

RenderTarget 分辨率按月球屏占比做自适应（小月亮就用 1/2 或 1/4 分辨率，近景放大时再提升）。

确保烘焙通道与主渲染 色调映射/输出编码一致，避免“烘出来的月球”色感跑偏。

如需“地球挡住月球”的遮挡关系，保持正常深度写入即可（烘焙贴图只是外观来源，不影响几何/深度）。

这个模式本质是“双通道降频”：只有参数变更才启用第二通道，符合你的业务“低频月相，高频地球”。

B. 保持双通道逐帧渲染时的优化（若你坚持每帧都两次 render）

状态切换最小化

用同一 Scene，靠 visible=true/false 批量切换“月球组/地球组”“月光/地光”，避免反复创建/销毁或替换材质。

关闭月球的 castShadow/receiveShadow，并禁用地球通道中的月球对象（减少 DrawCall）。

只清一次屏

帧头清颜色+深度；月球通道之后 不再清，直接进地球通道（复用深度，天然保证遮挡关系）。

分辨率与视口裁剪

如果月球占屏很小：月球通道可用低分辨率 offscreen再合成（或用 setViewport/setScissor 仅渲月球所在屏区）。

屏占比阈值：例如月球直径 < 120 px 时，降一档分辨率；< 60 px 时再降一档。

透明层只在地球通道

大气散射、云层、光晕等半透明统一放在地球通道，避免双通道各自排序一遍。

半透明保持 depthWrite=false、depthTest=true，并确认渲染顺序在不透明之后。

环境光/IBL隔离

不用 scene.environment。

地球材质单独挂 envMap_Earth；月球材质不挂，或挂很低权重的“地球辉”贴图（如有需求）。

后期一次做

把两通道的结果在同一帧缓冲后统一做后期（Bloom/色调映射/色彩空间），避免双倍开销与色感不一致。

若只想对地球做特殊后期，改用两路 RenderPass 合成（Moon→Earth→Selective Post）。

近远景“替身”策略（Impostor）

远景：用相位烘焙贴图 + Unlit（或 billboard/sprite）替代真实几何，极省算力。

近景：切换回真实几何 + 月球通道（阈值按屏占比或相机距离控制）。

程序缓存与 GC 控制

确保两通道使用的材质/定义一致且稳定，避免 shader program 反复编译。

统一开启/关闭灯光而非频繁增删；避免频繁创建 RenderTarget。

C. 阴影/食相的渐进式接入（按需）

MVP：不做任何阴影（最稳）。

需要“月球投影在地球”（日食）：

仍保持双通道；在地球通道启用“太阳光阴影”，让月球在该通道仅参与阴影图（月球本体 visible=false，但 castShadow=true）。

这样月球外观仍由自己的通道/贴图决定，同时能在地球上产生阴影。

D. 业务层的缓存与触发

月相缓存：以日期（或朔望月序号）为 key，缓存月相参数/烘焙贴图，二次进入同日直接命中。

参数变更阈值：地球侧的经纬/时间连续变化→每帧刷新；月球侧只有“日期切换”或“用户滑块大步长变化”才触发重烘或切换替身层级。

预计算：用户快速切换日期时可后台预烘相邻几天（月偏移 ±1～2 天），实现无感切换。（如果你不想做异步，就保持按需触发即可。）

推荐落地顺序

先做 A 模式（锁月＋单通道复用）：月相只在日期改变时渲一次，平时只跑地球。

若以后要“拖动实时月相”或做“食相阴影”等，再引入 B/C 的逐帧双通道与阴影扩展。

远景优化再加 Impostor（屏占比阈值切换）。