client:495 [vite] connecting...
client:618 [vite] connected.
chunk-7KQABULR.js?v=228ab28f:21551 Download the React DevTools for a better development experience: https://reactjs.org/link/react-devtools
main.tsx:6 [Main] React root created
main.tsx:8 [Main] App render called
ephemeris.ts:232 [toUTCFromLocal] 1993-08-01T11:00 (lon:121.4737) -> UTC: 1993-08-01T03:00:00.000Z (offset: 8h)
ephemeris.ts:144 [computeEphemeris] 1993-08-01T03:00:00.000Z at 31.2304°N,121.4737°E:
ephemeris.ts:151   Solar position: az=341.5°, alt=-38.8°
ephemeris.ts:155   Sun ENU: [-0.248, -0.626, 0.739]
ephemeris.ts:159   Sun ECEF: [0.691, -0.654, 0.308]
ephemeris.ts:193   Sun world direction: [0.691, -0.654, 0.308]
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: 1, y: 0, z: 0}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '0.0', altitude: '0.0'}
content.js:1402 [AeScape] 准备初始化悬浮球
content.js:33 [AeScape] 悬浮球系统初始化开始
content.js:156 [AeScape] URL检查: http://localhost:5173/, 应排除: false
content.js:1444 [AeScape] 内容脚本已加载
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2025-09-04T07:40', latDeg: 31.2, lonDeg: 121.5, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2025-09-04T07:40', latDeg: 31.2, lonDeg: 121.5}
ephemeris.ts:232 [toUTCFromLocal] 2025-09-04T07:40 (lon:121.5) -> UTC: 2025-09-03T23:40:00.000Z (offset: 8h)
ephemeris.ts:144 [computeEphemeris] 2025-09-03T23:40:00.000Z at 31.2°N,121.5°E:
ephemeris.ts:151   Solar position: az=290.7°, alt=-18.6°
ephemeris.ts:155   Sun ENU: [-0.886, -0.319, 0.335]
ephemeris.ts:159   Sun ECEF: [0.989, 0.082, 0.122]
ephemeris.ts:193   Sun world direction: [0.989, 0.082, 0.122]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.004320648106391101, altDeg: -18.61840025918218, azDeg: 290.7304875657875}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 1
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: 0.9891860738317523, y: 0.08208690641864985, z: 0.1215427954752524}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '290.7', alt: '-18.6'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 290.7304875657875, altDeg: -18.61840025918218}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
App.tsx:22 [App] mounted
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: 0.9891860738317523, y: 0.08208690641864985, z: 0.1215427954752524}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '290.7', altitude: '-18.6'}
content.js:167 [AeScape] 用户设置检查: false
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '4.71°', belowHorizon: false}
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:25'}
chunk-MNPL44JA.js?v=228ab28f:16929 [Violation] 'requestAnimationFrame' handler took 1704ms
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-03-21T07:00', latDeg: 31.2, lonDeg: 121.5, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-03-21T07:00', latDeg: 31.2, lonDeg: 121.5}
ephemeris.ts:232 [toUTCFromLocal] 2024-03-21T07:00 (lon:121.5) -> UTC: 2024-03-20T23:00:00.000Z (offset: 8h)
ephemeris.ts:144 [computeEphemeris] 2024-03-20T23:00:00.000Z at 31.2°N,121.5°E:
ephemeris.ts:151   Solar position: az=278.2°, alt=-12.3°
ephemeris.ts:155   Sun ENU: [-0.967, -0.213, 0.140]
ephemeris.ts:159   Sun ECEF: [0.957, 0.288, 0.009]
ephemeris.ts:193   Sun world direction: [0.957, 0.288, 0.009]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.054519907904249876, altDeg: -12.286869127974995, azDeg: 278.21770007678896}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 1
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: 0.957466232543817, y: 0.28839795747824987, z: 0.009221261341209874}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '278.2', alt: '-12.3'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 278.21770007678896, altDeg: -12.286869127974995}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: 0.957466232543817, y: 0.28839795747824987, z: 0.009221261341209874}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '278.2', altitude: '-12.3'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '16.76°', belowHorizon: false}
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:28'}
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-06-21T12:00', latDeg: 31.2, lonDeg: 121.5, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-06-21T12:00', latDeg: 31.2, lonDeg: 121.5}
ephemeris.ts:232 [toUTCFromLocal] 2024-06-21T12:00 (lon:121.5) -> UTC: 2024-06-21T04:00:00.000Z (offset: 8h)
ephemeris.ts:144 [computeEphemeris] 2024-06-21T04:00:00.000Z at 31.2°N,121.5°E:
ephemeris.ts:151   Solar position: az=1.1°, alt=-35.4°
ephemeris.ts:155   Sun ENU: [0.016, -0.579, 0.815]
ephemeris.ts:159   Sun ECEF: [0.466, -0.791, 0.398]
ephemeris.ts:193   Sun world direction: [0.466, -0.791, 0.398]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.0158770816834074, altDeg: -35.35768306770582, azDeg: 1.128232966962042}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 0.9999999999999999
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: 0.4656372738487103, y: -0.7905847849700103, z: 0.3976903657076243}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '1.1', alt: '-35.4'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 1.128232966962042, altDeg: -35.35768306770582}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: 0.4656372738487103, y: -0.7905847849700103, z: 0.3976903657076243}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '1.1', altitude: '-35.4'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '-52.24°', belowHorizon: true}
lightingUtils.ts:35 [useLightDirection] WARNING: Sun is below horizon! Elevation: -52.24019418230015
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:29'}
content.js:1967 Preloaded 316 local cards to cache
content.js:2110 Starting periodic update mechanism...
content.js:2122 Periodic update started with 180s interval
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-09-23T18:00', latDeg: 31.2, lonDeg: 121.5, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-09-23T18:00', latDeg: 31.2, lonDeg: 121.5}
ephemeris.ts:232 [toUTCFromLocal] 2024-09-23T18:00 (lon:121.5) -> UTC: 2024-09-23T10:00:00.000Z (offset: 8h)
ephemeris.ts:144 [computeEphemeris] 2024-09-23T10:00:00.000Z at 31.2°N,121.5°E:
ephemeris.ts:151   Solar position: az=92.3°, alt=2.7°
ephemeris.ts:155   Sun ENU: [0.998, 0.047, -0.040]
ephemeris.ts:159   Sun ECEF: [-0.883, -0.470, -0.009]
ephemeris.ts:193   Sun world direction: [-0.883, -0.470, -0.009]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.008073950688278098, altDeg: 2.6969162139622807, azDeg: 92.27167496643636}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 1
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: -0.8827723699956948, y: -0.4697050480795058, z: -0.009492659311993883}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '92.3', alt: '2.7'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 92.27167496643636, altDeg: 2.6969162139622807}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: -0.8827723699956948, y: -0.4697050480795058, z: -0.009492659311993883}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '92.3', altitude: '2.7'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '-28.02°', belowHorizon: true}
lightingUtils.ts:35 [useLightDirection] WARNING: Sun is below horizon! Elevation: -28.015152272663002
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:31'}
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-12-21T12:00', latDeg: 31.2, lonDeg: 121.5, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-12-21T12:00', latDeg: 31.2, lonDeg: 121.5}
ephemeris.ts:232 [toUTCFromLocal] 2024-12-21T12:00 (lon:121.5) -> UTC: 2024-12-21T04:00:00.000Z (offset: 8h)
ephemeris.ts:144 [computeEphemeris] 2024-12-21T04:00:00.000Z at 31.2°N,121.5°E:
ephemeris.ts:151   Solar position: az=12.7°, alt=-82.1°
ephemeris.ts:155   Sun ENU: [0.030, -0.990, 0.135]
ephemeris.ts:159   Sun ECEF: [0.453, -0.798, -0.398]
ephemeris.ts:193   Sun world direction: [0.453, -0.798, -0.398]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.015868061487342544, altDeg: -82.05567080688222, azDeg: 12.684225937267978}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 0.9999999999999999
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: 0.45325776705272813, y: -0.7977319278866837, z: -0.39771996157669776}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '12.7', alt: '-82.1'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 12.684225937267978, altDeg: -82.05567080688222}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: 0.45325776705272813, y: -0.7977319278866837, z: -0.39771996157669776}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '12.7', altitude: '-82.1'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '-52.91°', belowHorizon: true}
lightingUtils.ts:35 [useLightDirection] WARNING: Sun is below horizon! Elevation: -52.91405998888011
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:31'}
content_script.js:1 [Violation] 'setTimeout' handler took 57ms
content_script.js:1 [Violation] 'load' handler took 237ms
content.js:1972 Force preloading more content...
content.js:1995 Force preloading quotes: 12 cards needed
content.js:1995 Force preloading facts: 8 cards needed
content.js:1995 Force preloading advice: 8 cards needed
content.js:1995 Force preloading catfacts: 6 cards needed
content.js:1995 Force preloading cocktails: 7 cards needed
content.js:1995 Force preloading datafacts: 25 cards needed
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-06-21T06:00', latDeg: 66, lonDeg: 0, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-06-21T06:00', latDeg: 66, lonDeg: 0}
ephemeris.ts:232 [toUTCFromLocal] 2024-06-21T06:00 (lon:0) -> UTC: 2024-06-21T06:00:00.000Z (offset: 0h)
ephemeris.ts:144 [computeEphemeris] 2024-06-21T06:00:00.000Z at 66°N,0°E:
ephemeris.ts:151   Solar position: az=279.6°, alt=21.5°
ephemeris.ts:155   Sun ENU: [-0.917, 0.367, 0.154]
ephemeris.ts:159   Sun ECEF: [0.008, -0.917, 0.398]
ephemeris.ts:193   Sun world direction: [0.008, -0.917, 0.398]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.011686164592724424, altDeg: 21.504157774016587, azDeg: 279.55332972591145}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 1
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: 0.008033784578579423, y: -0.9174878903800489, z: 0.39768257355749514}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '279.6', alt: '21.5'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 279.55332972591145, altDeg: 21.504157774016587}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: 0.008033784578579423, y: -0.9174878903800489, z: 0.39768257355749514}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '279.6', altitude: '21.5'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '-66.56°', belowHorizon: true}
lightingUtils.ts:35 [useLightDirection] WARNING: Sun is below horizon! Elevation: -66.56154841235677
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:33'}
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-06-21T12:00', latDeg: 66, lonDeg: 0, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-06-21T12:00', latDeg: 66, lonDeg: 0}
ephemeris.ts:232 [toUTCFromLocal] 2024-06-21T12:00 (lon:0) -> UTC: 2024-06-21T12:00:00.000Z (offset: 0h)
ephemeris.ts:144 [computeEphemeris] 2024-06-21T12:00:00.000Z at 66°N,0°E:
ephemeris.ts:151   Solar position: az=359.5°, alt=-0.6°
ephemeris.ts:155   Sun ENU: [-0.008, -0.010, 1.000]
ephemeris.ts:159   Sun ECEF: [-0.917, -0.008, 0.398]
ephemeris.ts:193   Sun world direction: [-0.917, -0.008, 0.398]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.0000027231416397932584, altDeg: -0.5674973794511071, azDeg: 359.5272204152987}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 0.9999999999999999
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: -0.917498085714779, y: -0.00825106200684917, z: 0.39765460224354926}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '359.5', alt: '-0.6'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 359.5272204152987, altDeg: -0.5674973794511071}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: -0.917498085714779, y: -0.00825106200684917, z: 0.39765460224354926}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '359.5', altitude: '-0.6'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '-0.47°', belowHorizon: true}
lightingUtils.ts:35 [useLightDirection] WARNING: Sun is below horizon! Elevation: -0.47275639380780143
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:33'}
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-06-21T18:00', latDeg: 66, lonDeg: 0, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-06-21T18:00', latDeg: 66, lonDeg: 0}
ephemeris.ts:232 [toUTCFromLocal] 2024-06-21T18:00 (lon:0) -> UTC: 2024-06-21T18:00:00.000Z (offset: 0h)
ephemeris.ts:144 [computeEphemeris] 2024-06-21T18:00:00.000Z at 66°N,0°E:
ephemeris.ts:151   Solar position: az=79.5°, alt=21.1°
ephemeris.ts:155   Sun ENU: [0.918, 0.360, 0.169]
ephemeris.ts:159   Sun ECEF: [-0.008, 0.918, 0.398]
ephemeris.ts:193   Sun world direction: [-0.008, 0.918, 0.398]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.7554135020692017, altDeg: 21.08787766303214, azDeg: 79.53551062790164}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 0.9999999999999999
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: -0.008468123641236754, y: 0.9175112171749997, z: 0.39761973949999935}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '79.5', alt: '21.1'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 79.53551062790164, altDeg: 21.08787766303214}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: -0.008468123641236754, y: 0.9175112171749997, z: 0.39761973949999935}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '79.5', altitude: '21.1'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '66.56°', belowHorizon: false}
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:34'}
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-06-21T00:00', latDeg: 66, lonDeg: 0, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-06-21T00:00', latDeg: 66, lonDeg: 0}
ephemeris.ts:232 [toUTCFromLocal] 2024-06-21T00:00 (lon:0) -> UTC: 2024-06-21T00:00:00.000Z (offset: 0h)
ephemeris.ts:144 [computeEphemeris] 2024-06-21T00:00:00.000Z at 66°N,0°E:
ephemeris.ts:151   Solar position: az=179.3°, alt=47.4°
ephemeris.ts:155   Sun ENU: [0.008, 0.736, -0.676]
ephemeris.ts:159   Sun ECEF: [0.917, 0.008, 0.398]
ephemeris.ts:193   Sun world direction: [0.917, 0.008, 0.398]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.000039101317898526666, altDeg: 47.43355393273745, azDeg: 179.33793299267288}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 0.9999999999999999
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: 0.9174806320280825, y: 0.00781631396935669, z: 0.39770365234591804}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '179.3', alt: '47.4'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 179.33793299267288, altDeg: 47.43355393273745}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: 0.9174806320280825, y: 0.00781631396935669, z: 0.39770365234591804}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '179.3', altitude: '47.4'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '0.45°', belowHorizon: false}
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:34'}
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-03-21T06:00', latDeg: 0, lonDeg: 0, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-03-21T06:00', latDeg: 0, lonDeg: 0}
ephemeris.ts:232 [toUTCFromLocal] 2024-03-21T06:00 (lon:0) -> UTC: 2024-03-21T06:00:00.000Z (offset: 0h)
ephemeris.ts:144 [computeEphemeris] 2024-03-21T06:00:00.000Z at 0°N,0°E:
ephemeris.ts:151   Solar position: az=270.6°, alt=1.7°
ephemeris.ts:155   Sun ENU: [-0.999, 0.030, 0.011]
ephemeris.ts:159   Sun ECEF: [0.030, -0.999, 0.011]
ephemeris.ts:193   Sun world direction: [0.030, -0.999, 0.011]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.00011624041649627159, altDeg: 1.7409317576634489, azDeg: 270.643786102998}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 1
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: 0.03038031596075093, y: -0.9994753155200837, z: 0.011230764361972926}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '270.6', alt: '1.7'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 270.643786102998, altDeg: 1.7409317576634489}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: 0.03038031596075093, y: -0.9994753155200837, z: 0.011230764361972926}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '270.6', altitude: '1.7'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '-88.14°', belowHorizon: true}
lightingUtils.ts:35 [useLightDirection] WARNING: Sun is below horizon! Elevation: -88.14388136898124
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:35'}
content.js:1995 Force preloading gathas: 15 cards needed
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-03-21T12:00', latDeg: 0, lonDeg: 0, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-03-21T12:00', latDeg: 0, lonDeg: 0}
ephemeris.ts:232 [toUTCFromLocal] 2024-03-21T12:00 (lon:0) -> UTC: 2024-03-21T12:00:00.000Z (offset: 0h)
ephemeris.ts:144 [computeEphemeris] 2024-03-21T12:00:00.000Z at 0°N,0°E:
ephemeris.ts:151   Solar position: az=293.3°, alt=-88.1°
ephemeris.ts:155   Sun ENU: [-0.030, -0.999, 0.013]
ephemeris.ts:159   Sun ECEF: [-0.999, -0.030, 0.013]
ephemeris.ts:193   Sun world direction: [-0.999, -0.030, 0.013]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.00003611897661764951, altDeg: -88.1245884126112, azDeg: 293.31521220549166}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 0.9999999999999999
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: -0.9994643524112438, y: -0.030053879471563773, z: 0.012952705813152636}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '293.3', alt: '-88.1'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 293.31521220549166, altDeg: -88.1245884126112}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: -0.9994643524112438, y: -0.030053879471563773, z: 0.012952705813152636}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '293.3', altitude: '-88.1'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '-1.72°', belowHorizon: true}
lightingUtils.ts:35 [useLightDirection] WARNING: Sun is below horizon! Elevation: -1.72221977981887
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:36'}
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-03-21T18:00', latDeg: 0, lonDeg: 0, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-03-21T18:00', latDeg: 0, lonDeg: 0}
ephemeris.ts:232 [toUTCFromLocal] 2024-03-21T18:00 (lon:0) -> UTC: 2024-03-21T18:00:00.000Z (offset: 0h)
ephemeris.ts:144 [computeEphemeris] 2024-03-21T18:00:00.000Z at 0°N,0°E:
ephemeris.ts:151   Solar position: az=89.2°, alt=-1.7°
ephemeris.ts:155   Sun ENU: [0.999, -0.030, 0.015]
ephemeris.ts:159   Sun ECEF: [-0.030, 0.999, 0.015]
ephemeris.ts:193   Sun world direction: [-0.030, 0.999, 0.015]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.9980483228367735, altDeg: -1.7034815281654951, azDeg: 89.15883055040334}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 1
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: -0.029726981415077455, y: 0.9994503367218709, z: 0.014674161048819568}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '89.2', alt: '-1.7'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 89.15883055040334, altDeg: -1.7034815281654951}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: -0.029726981415077455, y: 0.9994503367218709, z: 0.014674161048819568}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '89.2', altitude: '-1.7'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '88.10°', belowHorizon: false}
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:36'}
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-03-21T00:00', latDeg: 0, lonDeg: 0, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-03-21T00:00', latDeg: 0, lonDeg: 0}
ephemeris.ts:232 [toUTCFromLocal] 2024-03-21T00:00 (lon:0) -> UTC: 2024-03-21T00:00:00.000Z (offset: 0h)
ephemeris.ts:144 [computeEphemeris] 2024-03-21T00:00:00.000Z at 0°N,0°E:
ephemeris.ts:151   Solar position: az=72.8°, alt=88.2°
ephemeris.ts:155   Sun ENU: [0.031, 0.999, 0.010]
ephemeris.ts:159   Sun ECEF: [0.999, 0.031, 0.010]
ephemeris.ts:193   Sun world direction: [0.999, 0.031, 0.010]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.0006035991851633393, altDeg: 88.15792521410086, azDeg: 72.79456437987389}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 1
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: 0.9994832245824369, y: 0.030706264766626263, z: 0.009508369070238516}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '72.8', alt: '88.2'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 72.79456437987389, altDeg: 88.15792521410086}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: 0.9994832245824369, y: 0.030706264766626263, z: 0.009508369070238516}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '72.8', altitude: '88.2'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '1.76°', belowHorizon: false}
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:37'}
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-12-21T06:00', latDeg: 40, lonDeg: 116, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-12-21T06:00', latDeg: 40, lonDeg: 116}
ephemeris.ts:232 [toUTCFromLocal] 2024-12-21T06:00 (lon:116) -> UTC: 2024-12-20T22:00:00.000Z (offset: 8h)
ephemeris.ts:144 [computeEphemeris] 2024-12-20T22:00:00.000Z at 40°N,116°E:
ephemeris.ts:151   Solar position: az=249.6°, alt=-12.2°
ephemeris.ts:155   Sun ENU: [-0.916, -0.212, -0.341]
ephemeris.ts:159   Sun ECEF: [0.798, 0.453, -0.398]
ephemeris.ts:193   Sun world direction: [0.798, 0.453, -0.398]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.13955744303951634, altDeg: -12.230540250930991, azDeg: 249.55164448040043}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 0.9999999999999999
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: 0.7979757057572469, y: 0.4528239675773867, z: -0.3977250650998725}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '249.6', alt: '-12.2'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 249.55164448040043, altDeg: -12.230540250930991}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: 0.7979757057572469, y: 0.4528239675773867, z: -0.3977250650998725}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '249.6', altitude: '-12.2'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '26.93°', belowHorizon: false}
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:37'}
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-12-21T12:00', latDeg: 40, lonDeg: 116, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-12-21T12:00', latDeg: 40, lonDeg: 116}
ephemeris.ts:232 [toUTCFromLocal] 2024-12-21T12:00 (lon:116) -> UTC: 2024-12-21T04:00:00.000Z (offset: 8h)
ephemeris.ts:144 [computeEphemeris] 2024-12-21T04:00:00.000Z at 40°N,116°E:
ephemeris.ts:151   Solar position: az=348.5°, alt=-73.2°
ephemeris.ts:155   Sun ENU: [-0.058, -0.957, 0.284]
ephemeris.ts:159   Sun ECEF: [0.453, -0.798, -0.398]
ephemeris.ts:193   Sun world direction: [0.453, -0.798, -0.398]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.015868061487342433, altDeg: -73.15854103255741, azDeg: 348.5159505689667}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 1
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: 0.453257767052728, y: -0.7977319278866839, z: -0.3977199615766972}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '348.5', alt: '-73.2'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 348.5159505689667, altDeg: -73.15854103255741}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: 0.453257767052728, y: -0.7977319278866839, z: -0.3977199615766972}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '348.5', altitude: '-73.2'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '-52.91°', belowHorizon: true}
lightingUtils.ts:35 [useLightDirection] WARNING: Sun is below horizon! Elevation: -52.91405998888013
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:38'}
content.js:2024 Force preload completed. Total cache size: 371
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-12-21T18:00', latDeg: 40, lonDeg: 116, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-12-21T18:00', latDeg: 40, lonDeg: 116}
ephemeris.ts:232 [toUTCFromLocal] 2024-12-21T18:00 (lon:116) -> UTC: 2024-12-21T10:00:00.000Z (offset: 8h)
ephemeris.ts:144 [computeEphemeris] 2024-12-21T10:00:00.000Z at 40°N,116°E:
ephemeris.ts:151   Solar position: az=106.3°, alt=-17.5°
ephemeris.ts:155   Sun ENU: [0.916, -0.300, -0.267]
ephemeris.ts:159   Sun ECEF: [-0.797, -0.454, -0.398]
ephemeris.ts:193   Sun world direction: [-0.797, -0.454, -0.398]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.007588401471137374, altDeg: -17.470183163669805, azDeg: 106.27143392372304}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 1
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: -0.7974908192602157, y: -0.4536932131901773, z: -0.3977070045911216}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '106.3', alt: '-17.5'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 106.27143392372304, altDeg: -17.470183163669805}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: -0.7974908192602157, y: -0.4536932131901773, z: -0.3977070045911216}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '106.3', altitude: '-17.5'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '-26.98°', belowHorizon: true}
lightingUtils.ts:35 [useLightDirection] WARNING: Sun is below horizon! Elevation: -26.980884744590263
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:38'}
SimpleTest.tsx:342 [Effect] Auto-updating sunlight due to change in: {dateISO: '2024-12-21T00:00', latDeg: 40, lonDeg: 116, autoUpdate: true}
SimpleTest.tsx:273 [Sunlight Update] Starting update for: {dateISO: '2024-12-21T00:00', latDeg: 40, lonDeg: 116}
ephemeris.ts:232 [toUTCFromLocal] 2024-12-21T00:00 (lon:116) -> UTC: 2024-12-20T16:00:00.000Z (offset: 8h)
ephemeris.ts:144 [computeEphemeris] 2024-12-20T16:00:00.000Z at 40°N,116°E:
ephemeris.ts:151   Solar position: az=176.4°, alt=26.5°
ephemeris.ts:155   Sun ENU: [0.057, 0.446, -0.893]
ephemeris.ts:159   Sun ECEF: [-0.452, 0.798, -0.398]
ephemeris.ts:193   Sun world direction: [-0.452, 0.798, -0.398]
SimpleTest.tsx:276 [Sunlight Update] Raw ephemeris result: {sunDirWorld: {…}, moonDirWorld: {…}, illumination: 0.5126395586174052, altDeg: 26.47814364068576, azDeg: 176.36886349187282}
SimpleTest.tsx:291 [Sunlight Update] Sun direction magnitude: 1
SimpleTest.tsx:313 [Sunlight Update] Normalized sun direction: {x: -0.4523918412288769, y: 0.7982221379232685, z: -0.3977223158420373}
SimpleTest.tsx:314 [Sunlight Update] Real sun angles: {az: '176.4', alt: '26.5'}
SimpleTest.tsx:315 [Sunlight Update] Setting sunAngles state: {azDeg: 176.36886349187282, altDeg: 26.47814364068576}
SimpleTest.tsx:327 [Sunlight Update] Light direction info calculated
SimpleTest.tsx:482 [LightInfo] Raw sunWorld: {x: -0.4523918412288769, y: 0.7982221379232685, z: -0.3977223158420373}
SimpleTest.tsx:483 [LightInfo] Real sun angles from ephemeris: {azimuth: '176.4', altitude: '26.5'}
lightingUtils.ts:12 [useLightDirection] Recalculating light direction: {mode: 'celestial', sunWorld: {…}, lightAzimuth: 180, lightElevation: 0}
lightingUtils.ts:27 [useLightDirection] Celestial mode result: {direction: Array(3), elevation: '52.96°', belowHorizon: false}
SimpleTest.tsx:69 [SceneContent] Light direction updated: {direction: Array(3), position: Array(3), mode: 'celestial', timestamp: '07:40:39'}
content_script.js:1 [Violation] 'setTimeout' handler took 55ms
content_script.js:1 [Violation] 'load' handler took 213ms
