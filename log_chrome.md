 [vite] connecting...
 [vite] connected.
 Download the React DevTools for a better development experience: https://reactjs.org/link/react-devtools
 [Main] React root created
 [Main] App render called
 [toUTCFromLocal] 1993-08-01T11:00 (lon:121.4737) -> UTC: 1993-08-01T03:00:00.000Z (offset: 8h)
 [toUTCFromLocal] 注意：UTC时间3:0 对应本地时间11:0
 ✅ 天文常数验证通过
 [LightInfo] Raw sunWorld: Object
 [LightInfo] Real sun angles from ephemeris: Object
 [AeScape] 准备初始化悬浮球
 [AeScape] 悬浮球系统初始化开始
 [AeScape] URL检查: http://localhost:5173/, 应排除: false
 [AeScape] 内容脚本已加载
 [toUTCFromLocal] 2025-09-05T00:34 (lon:121.5) -> UTC: 2025-09-04T16:34:00.000Z (offset: 8h)
 [toUTCFromLocal] 注意：UTC时间16:34 对应本地时间0:34
 ✅ 天文常数验证通过
 [App] mounted
 [LightInfo] Raw sunWorld: Object
 [LightInfo] Real sun angles from ephemeris: Object
 [AeScape] 用户设置检查: false
 [Test] Testing dramatically different sun positions...
 [Test] Setting time to 2024-03-21T07:00...
 [toUTCFromLocal] 2024-03-21T07:00 (lon:121.5) -> UTC: 2024-03-20T23:00:00.000Z (offset: 8h)
 [toUTCFromLocal] 注意：UTC时间23:0 对应本地时间7:0
 ✅ 天文常数验证通过
 [Test] 2024-03-21T07:00: Object
 [toUTCFromLocal] 2024-03-21T07:00 (lon:121.5) -> UTC: 2024-03-20T23:00:00.000Z (offset: 8h)
 [toUTCFromLocal] 注意：UTC时间23:0 对应本地时间7:0
 ✅ 天文常数验证通过
 [LightInfo] Raw sunWorld: Object
 [LightInfo] Real sun angles from ephemeris: Object
 Preloaded 316 local cards to cache
 Starting periodic update mechanism...
 Periodic update started with 180s interval
 Force preloading more content...
 Force preloading quotes: 10 cards needed
 Force preloading facts: 8 cards needed
 Force preloading advice: 6 cards needed
 Force preloading catfacts: 6 cards needed
 Force preloading cocktails: 11 cards needed
 [Test] Setting time to 2024-03-21T12:00...
 [toUTCFromLocal] 2024-03-21T12:00 (lon:121.5) -> UTC: 2024-03-21T04:00:00.000Z (offset: 8h)
 [toUTCFromLocal] 注意：UTC时间4:0 对应本地时间12:0
 ✅ 天文常数验证通过
 [Test] 2024-03-21T12:00: Object
 [toUTCFromLocal] 2024-03-21T12:00 (lon:121.5) -> UTC: 2024-03-21T04:00:00.000Z (offset: 8h)
 [toUTCFromLocal] 注意：UTC时间4:0 对应本地时间12:0
 ✅ 天文常数验证通过
 [LightInfo] Raw sunWorld: Object
 [LightInfo] Real sun angles from ephemeris: Object
 [Test] Setting time to 2024-03-21T18:00...
 [toUTCFromLocal] 2024-03-21T18:00 (lon:121.5) -> UTC: 2024-03-21T10:00:00.000Z (offset: 8h)
 [toUTCFromLocal] 注意：UTC时间10:0 对应本地时间18:0
 ✅ 天文常数验证通过
 [Test] 2024-03-21T18:00: Object
 [toUTCFromLocal] 2024-03-21T18:00 (lon:121.5) -> UTC: 2024-03-21T10:00:00.000Z (offset: 8h)
 [toUTCFromLocal] 注意：UTC时间10:0 对应本地时间18:0
 ✅ 天文常数验证通过
 [LightInfo] Raw sunWorld: Object
 [LightInfo] Real sun angles from ephemeris: Object
 Force preloading datafacts: 25 cards needed
 [Test] Setting time to 2024-06-21T12:00...
 [toUTCFromLocal] 2024-06-21T12:00 (lon:121.5) -> UTC: 2024-06-21T04:00:00.000Z (offset: 8h)
 [toUTCFromLocal] 注意：UTC时间4:0 对应本地时间12:0
 ✅ 天文常数验证通过
 [Test] 2024-06-21T12:00: Object
 [toUTCFromLocal] 2024-06-21T12:00 (lon:121.5) -> UTC: 2024-06-21T04:00:00.000Z (offset: 8h)
 [toUTCFromLocal] 注意：UTC时间4:0 对应本地时间12:0
 ✅ 天文常数验证通过
 [LightInfo] Raw sunWorld: Object
 [LightInfo] Real sun angles from ephemeris: Object
 Force preloading gathas: 15 cards needed
 [Test] Setting time to 2024-12-21T12:00...
 [toUTCFromLocal] 2024-12-21T12:00 (lon:121.5) -> UTC: 2024-12-21T04:00:00.000Z (offset: 8h)
 [toUTCFromLocal] 注意：UTC时间4:0 对应本地时间12:0
 ✅ 天文常数验证通过
 [Test] 2024-12-21T12:00: Object
 [toUTCFromLocal] 2024-12-21T12:00 (lon:121.5) -> UTC: 2024-12-21T04:00:00.000Z (offset: 8h)
 [toUTCFromLocal] 注意：UTC时间4:0 对应本地时间12:0
 ✅ 天文常数验证通过
 [LightInfo] Raw sunWorld: Object
 [LightInfo] Real sun angles from ephemeris: Object
 Force preload completed. Total cache size: 371
 [Test] Dramatic sun position test completed
 [Extreme Test] Setting extreme sunWorld positions...
 [Extreme Test] Setting sunWorld to 东方: Object
 [LightInfo] Raw sunWorld: Object
 [LightInfo] Real sun angles from ephemeris: Object
 [Extreme Test] Setting sunWorld to 正上方: Object
 [LightInfo] Raw sunWorld: Object
 [LightInfo] Real sun angles from ephemeris: Object
 [Extreme Test] Setting sunWorld to 西方: Object
 [LightInfo] Raw sunWorld: Object
 [LightInfo] Real sun angles from ephemeris: Object
 [Extreme Test] Setting sunWorld to 正下方: Object
 [LightInfo] Raw sunWorld: Object
 [LightInfo] Real sun angles from ephemeris: Object
SimpleTest.tsx:883 [Extreme Test] Test completed
SimpleTest.tsx:407 [Consistency Test] Starting physical consistency validation...
SimpleTest.tsx:426 [Consistency Test] 1/7: Testing 春分赤道正午...
ephemeris.ts:377 [toUTCFromLocal] 2024-03-20T12:00 (lon:0) -> UTC: 2024-03-20T12:00:00.000Z (offset: 0h)
ephemeris.ts:378 [toUTCFromLocal] 注意：UTC时间12:0 对应本地时间12:0
constants.ts:50 ✅ 天文常数验证通过
SimpleTest.tsx:459 [Consistency Test] 春分赤道正午: Object
SimpleTest.tsx:426 [Consistency Test] 2/7: Testing 春分北半球正午...
ephemeris.ts:377 [toUTCFromLocal] 2024-03-20T12:00 (lon:0) -> UTC: 2024-03-20T12:00:00.000Z (offset: 0h)
ephemeris.ts:378 [toUTCFromLocal] 注意：UTC时间12:0 对应本地时间12:0
constants.ts:50 ✅ 天文常数验证通过
SimpleTest.tsx:459 [Consistency Test] 春分北半球正午: Object
SimpleTest.tsx:426 [Consistency Test] 3/7: Testing 春分南半球正午...
ephemeris.ts:377 [toUTCFromLocal] 2024-03-20T12:00 (lon:0) -> UTC: 2024-03-20T12:00:00.000Z (offset: 0h)
ephemeris.ts:378 [toUTCFromLocal] 注意：UTC时间12:0 对应本地时间12:0
constants.ts:50 ✅ 天文常数验证通过
SimpleTest.tsx:459 [Consistency Test] 春分南半球正午: Object
SimpleTest.tsx:426 [Consistency Test] 4/7: Testing 北极圈夏至午夜...
ephemeris.ts:377 [toUTCFromLocal] 2024-06-21T00:00 (lon:0) -> UTC: 2024-06-21T00:00:00.000Z (offset: 0h)
ephemeris.ts:378 [toUTCFromLocal] 注意：UTC时间0:0 对应本地时间0:0
constants.ts:50 ✅ 天文常数验证通过
SimpleTest.tsx:459 [Consistency Test] 北极圈夏至午夜: Object
SimpleTest.tsx:426 [Consistency Test] 5/7: Testing 北极圈夏至正午...
ephemeris.ts:377 [toUTCFromLocal] 2024-06-21T12:00 (lon:0) -> UTC: 2024-06-21T12:00:00.000Z (offset: 0h)
ephemeris.ts:378 [toUTCFromLocal] 注意：UTC时间12:0 对应本地时间12:0
constants.ts:50 ✅ 天文常数验证通过
SimpleTest.tsx:459 [Consistency Test] 北极圈夏至正午: Object
SimpleTest.tsx:426 [Consistency Test] 6/7: Testing 赤道0°E午夜...
ephemeris.ts:377 [toUTCFromLocal] 2024-03-20T00:00 (lon:0) -> UTC: 2024-03-20T00:00:00.000Z (offset: 0h)
ephemeris.ts:378 [toUTCFromLocal] 注意：UTC时间0:0 对应本地时间0:0
constants.ts:50 ✅ 天文常数验证通过
SimpleTest.tsx:459 [Consistency Test] 赤道0°E午夜: Object
SimpleTest.tsx:426 [Consistency Test] 7/7: Testing 赤道180°E午夜...
ephemeris.ts:377 [toUTCFromLocal] 2024-03-20T00:00 (lon:180) -> UTC: 2024-03-19T12:00:00.000Z (offset: 12h)
ephemeris.ts:378 [toUTCFromLocal] 注意：UTC时间12:0 对应本地时间0:0
constants.ts:50 ✅ 天文常数验证通过
SimpleTest.tsx:459 [Consistency Test] 赤道180°E午夜: Object
ephemeris.ts:377 [toUTCFromLocal] 2024-03-20T00:00 (lon:180) -> UTC: 2024-03-19T12:00:00.000Z (offset: 12h)
ephemeris.ts:378 [toUTCFromLocal] 注意：UTC时间12:0 对应本地时间0:0
constants.ts:50 ✅ 天文常数验证通过
SimpleTest.tsx:536 [LightInfo] Raw sunWorld: Object
SimpleTest.tsx:537 [LightInfo] Real sun angles from ephemeris: Object
SimpleTest.tsx:480 [Consistency Test] 物理一致性测试完成，请查看控制台结果
SimpleTest.tsx:486 🚀 开始运行关键验证测试...
validation.ts:89 🚀 开始运行关键验证测试...
validation.ts:94 
📋 测试 1: 夏至中午上海
constants.ts:50 ✅ 天文常数验证通过
validation.ts:103 ✅ 夏至中午上海 通过
validation.ts:94 
📋 测试 2: 冬至中午上海
constants.ts:50 ✅ 天文常数验证通过
validation.ts:103 ✅ 冬至中午上海 通过
validation.ts:94 
📋 测试 3: 春分中午上海
constants.ts:50 ✅ 天文常数验证通过
validation.ts:103 ✅ 春分中午上海 通过
validation.ts:94 
📋 测试 4: 北极圈夏至午夜
constants.ts:50 ✅ 天文常数验证通过
validation.ts:103 ✅ 北极圈夏至午夜 通过
validation.ts:94 
📋 测试 5: 北极圈冬至中午
constants.ts:50 ✅ 天文常数验证通过
validation.ts:103 ✅ 北极圈冬至中午 通过
validation.ts:94 
📋 测试 6: 赤道春分正午
constants.ts:50 ✅ 天文常数验证通过
validation.ts:105 ❌ 赤道春分正午 失败: Array(1)
validation.ts:94 
📋 测试 7: 0°E中午
constants.ts:50 ✅ 天文常数验证通过
validation.ts:105 ❌ 0°E中午 失败: Array(2)
validation.ts:94 
📋 测试 8: 180°E午夜
constants.ts:50 ✅ 天文常数验证通过
validation.ts:105 ❌ 180°E午夜 失败: Array(1)
validation.ts:125 
📊 测试结果统计:
validation.ts:126 ✅ 通过: 5/8
validation.ts:127 ❌ 失败: 3/8
validation.ts:132 ⚠️ 部分测试失败，需要进一步修复
SimpleTest.tsx:498 🔍 快速验证测试...
ephemeris.ts:377 [toUTCFromLocal] 2024-06-21T12:00 (lon:121.5) -> UTC: 2024-06-21T04:00:00.000Z (offset: 8h)
ephemeris.ts:378 [toUTCFromLocal] 注意：UTC时间4:0 对应本地时间12:0
constants.ts:50 ✅ 天文常数验证通过
SimpleTest.tsx:513 [Quick Test] 夏至中午上海: Object
ephemeris.ts:377 [toUTCFromLocal] 2024-12-21T12:00 (lon:121.5) -> UTC: 2024-12-21T04:00:00.000Z (offset: 8h)
ephemeris.ts:378 [toUTCFromLocal] 注意：UTC时间4:0 对应本地时间12:0
constants.ts:50 ✅ 天文常数验证通过
SimpleTest.tsx:513 [Quick Test] 冬至中午上海: Object
ephemeris.ts:377 [toUTCFromLocal] 2024-03-21T12:00 (lon:121.5) -> UTC: 2024-03-21T04:00:00.000Z (offset: 8h)
ephemeris.ts:378 [toUTCFromLocal] 注意：UTC时间4:0 对应本地时间12:0
constants.ts:50 ✅ 天文常数验证通过
SimpleTest.tsx:513 [Quick Test] 春分中午上海: Object
SimpleTest.tsx:906 🔍 运行快速测试...
quickTest.ts:10 🚀 开始快速测试修复后的太阳位置计算...
quickTest.ts:16 
📋 测试1: 夏至当地正午上海 (2024-06-21 12:00 当地时间)
quickTest.ts:19 测试时间: UTC 2024-06-21T04:00:00.000Z (对应上海当地时间 12:00)
constants.ts:50 ✅ 天文常数验证通过
quickTest.ts:21 结果: 高度角=82.19°, 方位角=187.02°
quickTest.ts:24 
📋 测试2: 冬至当地正午上海 (2024-12-21 12:00 当地时间)
quickTest.ts:26 测试时间: UTC 2024-12-21T04:00:00.000Z (对应上海当地时间 12:00)
constants.ts:50 ✅ 天文常数验证通过
quickTest.ts:28 结果: 高度角=35.35°, 方位角=182.21°
quickTest.ts:31 
📋 测试3: 春分当地正午上海 (2024-03-21 12:00 当地时间)
quickTest.ts:33 测试时间: UTC 2024-03-21T04:00:00.000Z (对应上海当地时间 12:00)
constants.ts:50 ✅ 天文常数验证通过
quickTest.ts:35 结果: 高度角=59.22°, 方位角=179.46°
quickTest.ts:38 
📋 测试4: 赤道春分当地正午 (2024-03-21 12:00 当地时间)
constants.ts:50 ✅ 天文常数验证通过
quickTest.ts:40 结果: 高度角=-31.36°, 方位角=89.52°
quickTest.ts:43 
📊 验证结果:
quickTest.ts:55 ✅ 夏至当地正午上海: 通过 (82.19° >= 0°)
quickTest.ts:55 ✅ 冬至当地正午上海: 通过 (35.35° >= 0°)
quickTest.ts:55 ✅ 春分当地正午上海: 通过 (59.22° >= 0°)
quickTest.ts:58 ❌ 赤道春分当地正午: 失败 (-31.36° < 80°) - 赤道春分当地正午太阳应接近天顶（允许5°容差）
quickTest.ts:62 
📈 测试结果: 3/4 通过
quickTest.ts:67 ⚠️ 仍有测试失败，需要进一步修复
