import{c as m}from"./index-D9FZjche.js";const p=[{name:"å¤è‡³ä¸­åˆä¸Šæµ·",time:"2024-06-21T12:00",lat:31.2,lon:121.5,expected:{minAlt:0,description:"å¤è‡³ä¸­åˆä¸Šæµ·å¤ªé˜³åº”åœ¨åœ°å¹³çº¿ä¸Šæ–¹ï¼ˆå…è®¸è´Ÿå€¼ï¼Œå› ä¸ºå¯èƒ½ä¸æ˜¯çœŸæ­£çš„æ­£åˆï¼‰"}},{name:"å†¬è‡³ä¸­åˆä¸Šæµ·",time:"2024-12-21T12:00",lat:31.2,lon:121.5,expected:{minAlt:0,description:"å†¬è‡³ä¸­åˆä¸Šæµ·å¤ªé˜³åº”åœ¨åœ°å¹³çº¿ä¸Šæ–¹ï¼ˆå…è®¸è´Ÿå€¼ï¼Œå› ä¸ºå¯èƒ½ä¸æ˜¯çœŸæ­£çš„æ­£åˆï¼‰"}},{name:"æ˜¥åˆ†ä¸­åˆä¸Šæµ·",time:"2024-03-21T12:00",lat:31.2,lon:121.5,expected:{minAlt:0,description:"æ˜¥åˆ†ä¸­åˆä¸Šæµ·å¤ªé˜³åº”åœ¨åœ°å¹³çº¿ä¸Šæ–¹ï¼ˆå…è®¸è´Ÿå€¼ï¼Œå› ä¸ºå¯èƒ½ä¸æ˜¯çœŸæ­£çš„æ­£åˆï¼‰"}},{name:"åŒ—æåœˆå¤è‡³åˆå¤œ",time:"2024-06-21T00:00",lat:66.55,lon:0,expected:{minAlt:-5,description:"åŒ—æåœˆå¤è‡³åˆå¤œå¤ªé˜³åº”åœ¨åœ°å¹³çº¿ä¸Šï¼ˆææ˜¼ç°è±¡ï¼Œå…è®¸5Â°å®¹å·®ï¼‰"}},{name:"åŒ—æåœˆå†¬è‡³ä¸­åˆ",time:"2024-12-21T12:00",lat:66.55,lon:0,expected:{maxAlt:1,description:"åŒ—æåœˆå†¬è‡³ä¸­åˆå¤ªé˜³åº”æ¥è¿‘åœ°å¹³çº¿ï¼ˆå…è®¸1.0Â°å®¹å·®ï¼‰"}},{name:"èµ¤é“æ˜¥åˆ†æ­£åˆ",time:"2024-03-21T12:00",lat:0,lon:0,expected:{minAlt:80,description:"èµ¤é“æ˜¥åˆ†æ­£åˆå¤ªé˜³åº”æ¥è¿‘å¤©é¡¶ï¼ˆå…è®¸10Â°å®¹å·®ï¼‰"}},{name:"0Â°Eä¸­åˆ",time:"2024-06-21T12:00",lat:31.2,lon:0,expected:{minAlt:-15,description:"0Â°Eä¸­åˆå¤ªé˜³åº”åœ¨åœ°å¹³çº¿ä¸Šï¼ˆå…è®¸15Â°å®¹å·®ï¼‰"}},{name:"180Â°Eåˆå¤œ",time:"2024-06-21T00:00",lat:31.2,lon:180,expected:{maxAlt:-5,description:"180Â°Eåˆå¤œå¤ªé˜³åº”åœ¨åœ°å¹³çº¿ä¸‹ï¼ˆå…è®¸5Â°å®¹å·®ï¼‰"}}];function x(){console.log("ğŸš€ å¼€å§‹è¿è¡Œå…³é”®éªŒè¯æµ‹è¯•...");const t=[];p.forEach((l,e)=>{console.log(`
ğŸ“‹ æµ‹è¯• ${e+1}: ${l.name}`);try{const n=u(l);t.push(n),n.passed?console.log(`âœ… ${l.name} é€šè¿‡`):console.log(`âŒ ${l.name} å¤±è´¥:`,n.issues)}catch(n){console.error(`ğŸ’¥ ${l.name} æ‰§è¡Œé”™è¯¯:`,n),t.push({testCase:l.name,passed:!1,actual:{altitude:0,azimuth:0,sunWorld:{x:0,y:0,z:0}},expected:l.expected,issues:[`æ‰§è¡Œé”™è¯¯: ${n}`],warnings:[]})}});const o=t.filter(l=>l.passed).length,a=t.length;return console.log(`
ğŸ“Š æµ‹è¯•ç»“æœç»Ÿè®¡:`),console.log(`âœ… é€šè¿‡: ${o}/${a}`),console.log(`âŒ å¤±è´¥: ${a-o}/${a}`),console.log(o===a?"ğŸ‰ æ‰€æœ‰å…³é”®æµ‹è¯•é€šè¿‡ï¼åŸºç¡€ä¿®å¤æˆåŠŸï¼":"âš ï¸ éƒ¨åˆ†æµ‹è¯•å¤±è´¥ï¼Œéœ€è¦è¿›ä¸€æ­¥ä¿®å¤"),t}function u(t){const o=[],a=[],l=new Date(t.time),e=m(l,t.lat,t.lon);let n=!0;(e.altDeg<-90||e.altDeg>90)&&(o.push(`é«˜åº¦è§’è¶…å‡ºç‰©ç†èŒƒå›´: ${e.altDeg}Â°`),n=!1),(e.azDeg<0||e.azDeg>360)&&(o.push(`æ–¹ä½è§’è¶…å‡ºç‰©ç†èŒƒå›´: ${e.azDeg}Â°`),n=!1);const i=5;if(t.expected.minAlt!==void 0&&e.altDeg<t.expected.minAlt-i&&(o.push(`é«˜åº¦è§’è¿‡ä½: ${e.altDeg}Â° < ${t.expected.minAlt-i}Â° (å®¹å·®: ${i}Â°)`),n=!1),e.altDeg>85&&t.name==="èµ¤é“æ˜¥åˆ†æ­£åˆ"){const s=Math.abs(t.lat)<5||t.lat>0?0:180,d=Math.min(Math.abs(e.azDeg-s),Math.abs(e.azDeg-(s+360)),Math.abs(e.azDeg-(s-360)));d>10&&(o.push(`å¤©é¡¶é™„è¿‘æ–¹ä½è§’å¼‚å¸¸: ${e.azDeg}Â° (æœŸæœ›: ${s}Â°, å·®å¼‚: ${d.toFixed(1)}Â°)`),n=!1)}t.expected.maxAlt!==void 0&&e.altDeg>t.expected.maxAlt+i&&(o.push(`é«˜åº¦è§’è¿‡é«˜: ${e.altDeg}Â° > ${t.expected.maxAlt+i}Â° (å®¹å·®: ${i}Â°)`),n=!1);const r=Math.sqrt(e.sunWorld.x*e.sunWorld.x+e.sunWorld.y*e.sunWorld.y+e.sunWorld.z*e.sunWorld.z);Math.abs(r-1)>.1&&a.push(`å¤ªé˜³æ–¹å‘å‘é‡é•¿åº¦å¼‚å¸¸: ${r.toFixed(3)} (åº”ä¸º1)`);const c=l.getMonth()+1;return t.lat>0&&c>=6&&c<=8&&e.altDeg<0&&(o.push(`åŒ—åŠçƒå¤å­£ä¸­åˆå¤ªé˜³ä¸åº”åœ¨åœ°å¹³çº¿ä¸‹ (æœˆä»½: ${c}, é«˜åº¦è§’: ${e.altDeg}Â°)`),n=!1),{testCase:t.name,passed:n,actual:{altitude:e.altDeg,azimuth:e.azDeg,sunWorld:e.sunWorld},expected:t.expected,issues:o,warnings:a}}export{p as CRITICAL_TEST_CASES,x as runCriticalValidationTests};
